!function(){angular.module("ng-geocoder",[])}(),function(){function e(e){function t(e,t,n){switch(n){case google.maps.GeocoderStatus.OK:return e.resolve(t);case google.maps.GeocoderStatus.ZERO_RESULTS:return e.resolve([]);case google.maps.GeocoderStatus.OVER_QUERY_LIMIT:return e.reject("Over query limit");case google.maps.GeocoderStatus.REQUEST_DENIED:return e.reject("Request denied");default:return e.reject("Unknown error")}}function n(e,t){return i(r({placeId:e},t))}function o(e,t){return i(r({address:e},t))}function i(n){var o=e.defer();return s.geocode(n,function(e,n){t(o,e,n)}),o.promise}function r(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}var s=new google.maps.Geocoder,u={geocodeById:n,geocodeByQuery:o};return u}angular.module("ng-geocoder").factory("ngGeocoderService",e),e.$inject=["$q"]}(),function(){function e(e,t,n){function o(t,o,i,r){function s(e){var t=e.target.classList.contains("ng-geocoder__input");13===e.keyCode&&t&&(e.preventDefault(),e.stopPropagation())}function u(n){e(function(){t.showList=!1},100)}function c(e){t.$apply(function(){t.showList=!0})}function l(n){var o=t.query.length;o<t.minLength||(R&&e.cancel(R),R=e(d,t.wait||500))}function a(e){if(e&&e.keyCode){var n=27===e.keyCode,o=13===e.keyCode,i=38===e.keyCode||40===e.keyCode;return o||i||n?(n&&m(),o&&_(t.index),i&&C(e.keyCode),e.preventDefault(),e.stopPropagation(),!1):void 0}}function d(){return t.$apply(function(){t.results=[],t.isEmpty=!1,t.isSearching=!0}),n.geocodeByQuery(t.query,U).then(g)}function g(e){t.index=0,t.isEmpty=0===e.length,t.results=e,t.showList=!0,t.isSearching=!1}function p(e){var n=e[0];n&&(t.query=n.formatted_address,t.result=n,t.showList=!1,y())}function f(){return t.query.length>=t.minLength&&t.showList}function m(){G.blur(),t.$apply(function(){t.showList=!1})}function _(n){t.results.length&&e(function(){t.index=n,t.result=t.results[n],t.query=t.result.formatted_address,t.showList=!1,r[t.inputName].$setValidity(T,!0),y()},0)}function y(){t.selectCallback&&"function"==typeof t.selectCallback&&t.selectCallback(t.result)}function h(e){if(e)return n.geocodeById(e,U).then(p)}function v(e,t){e!==t&&x(e)}function x(e){e?r[t.inputName].$setValidity(T,!!t.result.formatted_address):r[t.inputName].$setValidity(T,!0)}function w(n,o){o&&o!==t.inputId||e(function(){t.query="",t.result={},t.index=0,t.showList=!1,t.fieldRequired&&r[t.inputName].$setValidity(T,!1)},0)}function C(e){var n=t.index,o=t.results.length,i=38===e,r=40===e;i&&n-1>=0&&n--,r&&n+1<o&&n++,t.$apply(function(){t.index=n}),i&&t.results.length&&q(),r&&t.results.length&&E()}function q(){var e=S(),t=k(L());e<t&&$(e-t)}function E(){var e=L();I()<e.getBoundingClientRect().bottom&&$(k(e))}function L(){return b.querySelector(".ng-geocoder__list__item--focus")}function S(){return L().getBoundingClientRect().top-(N.getBoundingClientRect().top+parseInt(getComputedStyle(N).paddingTop,10))}function $(e){N.scrollTop=N.scrollTop+e}function I(){return N.getBoundingClientRect().top+parseInt(getComputedStyle(N).maxHeight,10)}function k(e){var t=getComputedStyle(e);return e.offsetHeight+parseInt(t.marginTop,10)+parseInt(t.marginBottom,10)}var R,b=o[0],B=b.closest("form"),G=b.querySelector(".ng-geocoder__input"),N=b.querySelector(".ng-geocoder__list"),T=t.requiredClass||"ng-geocoder__input--invalid",U={region:i.region,language:i.language};t.index=0,t.query="",t.results=[],t.result={},t.selectItem=_,t.displayList=f,t.inputKeydown=a,t.$watch("placeId",h),t.$watch("fieldRequired",v),t.$on("ng-geocoder:clear",w),B&&B.addEventListener("keydown",s),x(t.fieldRequired),G.addEventListener("blur",u),G.addEventListener("focus",c),G.addEventListener("input",l),G.addEventListener("keydown",a),G.addEventListener("compositionend",l)}function i(e,t){return t.templateUrl||r}var r="/ng-geocoder/ng-geocoder.html";t.put(r,'<div class="ng-geocoder">\n  <input name="{{ inputName }}" id="{{ inputId }}" placeholder="{{ placeholder }}" class="ng-geocoder__input" type="text" ng-model="query" ng-class="inputClass" autocomplete="off"/>\n\n  <ul class="ng-geocoder__list" ng-show="displayList()" ng-style="{ \'max-height\': maxHeight || \'250px\' }">\n    <li class="ng-geocoder__list__item ng-geocoder__list__item--searching" ng-if="isSearching">\n      <strong class="ng-geocoder__list__item__text" ng-bind="textSearching"></strong>\n    </li>\n    <li class="ng-geocoder__list__item ng-geocoder__list__item--empty" ng-if="isEmpty">\n      <strong class="ng-geocoder__list__item__text" ng-bind="textNoResults"></strong>\n    </li>\n    <li class="ng-geocoder__list__item" ng-repeat="result in results" ng-class="{ \'ng-geocoder__list__item--focus\': index === $index }" ng-click="selectItem($index)">\n      <strong class="ng-geocoder__list__item__text" ng-bind="result.formatted_address" tabindex="{{ $index }}"></strong>\n    </li>\n  </ul>\n</div>\n');var s={restrict:"AE",require:"^?form",scope:{result:"=ngGeocoder",wait:"=",placeId:"=",minLength:"=",fieldRequired:"=",selectCallback:"=",inputId:"@",inputName:"@",maxHeight:"@",inputClass:"@",placeholder:"@",requiredClass:"@",textSearching:"@",textNoResults:"@"},link:o,templateUrl:i};return s}angular.module("ng-geocoder").directive("ngGeocoder",e),e.$inject=["$timeout","$templateCache","ngGeocoderService"]}(),function(){window.Element&&!Element.prototype.closest&&(Element.prototype.closest=function(e){var t,n=(this.document||this.ownerDocument).querySelectorAll(e),o=this;do for(t=n.length;--t>=0&&n.item(t)!==o;);while(t<0&&(o=o.parentElement));return o})}();